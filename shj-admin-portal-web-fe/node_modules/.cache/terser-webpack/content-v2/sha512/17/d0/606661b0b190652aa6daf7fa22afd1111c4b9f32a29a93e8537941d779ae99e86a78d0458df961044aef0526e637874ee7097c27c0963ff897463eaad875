{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{F4UR:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"LoginModule\",(function(){return login_module_LoginModule}));var common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),finalize=__webpack_require__(\"nYR2\"),authentication_service=__webpack_require__(\"MqBq\"),environment=__webpack_require__(\"AytR\"),validators=__webpack_require__(\"ousT\"),core=__webpack_require__(\"fXoL\"),dcc_commons_ng_services=__webpack_require__(\"FD72\"),ngx_captcha=__webpack_require__(\"sjCC\"),ngx_translate_core=__webpack_require__(\"sYmb\");const _c0=[\"reCaptchaEl\"];function LoginComponent_button_1_Template(rf,ctx){if(1&rf){const _r7=core[\"ɵɵgetCurrentView\"]();core[\"ɵɵelementStart\"](0,\"button\",16),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r7),core[\"ɵɵnextContext\"]().setLanguage(\"ar-SA\")})),core[\"ɵɵelementStart\"](1,\"span\"),core[\"ɵɵtext\"](2,\"عربي\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()}}function LoginComponent_button_2_Template(rf,ctx){if(1&rf){const _r9=core[\"ɵɵgetCurrentView\"]();core[\"ɵɵelementStart\"](0,\"button\",16),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r9),core[\"ɵɵnextContext\"]().setLanguage(\"en-US\")})),core[\"ɵɵelementStart\"](1,\"span\"),core[\"ɵɵtext\"](2,\"En\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()}}function LoginComponent_div_21_div_1_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"div\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](2,1,\"general.field_validation_required\")))}function LoginComponent_div_21_div_2_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"div\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](2,1,\"general.field_validation_pattern\")))}function LoginComponent_div_21_div_3_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r12=core[\"ɵɵnextContext\"](2);core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](2,1,ctx_r12.f.username.errors.invalid))}}function LoginComponent_div_21_div_4_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r13=core[\"ɵɵnextContext\"](2);core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](2,1,ctx_r13.f.username.errors[\"invalid-nin-or-iqama\"]))}}function LoginComponent_div_21_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",17),core[\"ɵɵtemplate\"](1,LoginComponent_div_21_div_1_Template,3,3,\"div\",18),core[\"ɵɵtemplate\"](2,LoginComponent_div_21_div_2_Template,3,3,\"div\",18),core[\"ɵɵtemplate\"](3,LoginComponent_div_21_div_3_Template,3,3,\"div\",18),core[\"ɵɵtemplate\"](4,LoginComponent_div_21_div_4_Template,3,3,\"div\",18),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r2=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r2.f.username.errors.required),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r2.f.username.errors.pattern),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r2.f.username.errors.invalid),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r2.f.username.errors[\"invalid-nin-or-iqama\"])}}function LoginComponent_div_29_div_1_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"div\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](2,1,\"general.field_validation_required\")))}function LoginComponent_div_29_div_2_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\"),core[\"ɵɵtext\"](1),core[\"ɵɵpipe\"](2,\"translate\"),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r15=core[\"ɵɵnextContext\"](2);core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](2,1,ctx_r15.f.password.errors.invalid))}}function LoginComponent_div_29_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",17),core[\"ɵɵtemplate\"](1,LoginComponent_div_29_div_1_Template,3,3,\"div\",18),core[\"ɵɵtemplate\"](2,LoginComponent_div_29_div_2_Template,3,3,\"div\",18),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r3=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r3.f.password.errors.required),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx_r3.f.password.errors.invalid)}}function LoginComponent_ngx_recaptcha2_30_Template(rf,ctx){if(1&rf){const _r18=core[\"ɵɵgetCurrentView\"]();core[\"ɵɵelementStart\"](0,\"ngx-recaptcha2\",19,20),core[\"ɵɵlistener\"](\"load\",(function(){return core[\"ɵɵrestoreView\"](_r18),core[\"ɵɵnextContext\"]().onCaptchaLoad()}))(\"ready\",(function(){return core[\"ɵɵrestoreView\"](_r18),core[\"ɵɵnextContext\"]().onCaptchaReady()}))(\"success\",(function($event){return core[\"ɵɵrestoreView\"](_r18),core[\"ɵɵnextContext\"]().onCaptchaSuccess($event)})),core[\"ɵɵelementEnd\"]()}if(2&rf){const ctx_r4=core[\"ɵɵnextContext\"]();core[\"ɵɵpropertyInterpolate\"](\"hl\",ctx_r4.currentLanguage),core[\"ɵɵproperty\"](\"siteKey\",ctx_r4.recaptchaSiteKey)}}function LoginComponent_span_33_Template(rf,ctx){1&rf&&core[\"ɵɵelement\"](0,\"span\",21)}const _c1=function(){return[\"/reset-password\"]},routes=[{path:\"\",component:(()=>{class LoginComponent{constructor(formBuilder,i18nService,route,router,reCaptchaV3Service,authenticationService){this.formBuilder=formBuilder,this.i18nService=i18nService,this.route=route,this.router=router,this.reCaptchaV3Service=reCaptchaV3Service,this.authenticationService=authenticationService,this.loading=!1,this.showCaptcha=!1,this.authenticationService.isAuthenticated()&&this.router.navigate([\"/\"])}get currentLanguage(){return this.i18nService.language}setLanguage(language){this.i18nService.language=language}ngOnInit(){this.recaptchaSiteKey=environment.a.recaptchaSiteKey,this.createForm(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||\"/\"}get f(){return this.loginForm.controls}onSubmit(){Object.keys(this.loginForm.controls).forEach(field=>{this.loginForm.get(field).markAsTouched({onlySelf:!0})}),this.loginForm.invalid||(this.loading=!0,this.authenticationService.login(this.loginForm.value.username,this.loginForm.value.password,null).pipe(Object(finalize.a)(()=>{this.loginForm.markAsPristine(),this.loading=!1})).subscribe(user=>{console.log(user),this.router.navigate(user.passwordExpired?[\"/change-password\"]:[\"/\"],{replaceUrl:!0})},error=>{console.log(error),this.showCaptcha=555==error.status,this.error=error}))}createForm(){this.loginForm=this.formBuilder.group({username:[\"\",fesm2015_forms.Validators.compose([fesm2015_forms.Validators.required,validators.a.ninOrIqama(validators.b.NIN_OR_IQAMA)])],password:[\"\",fesm2015_forms.Validators.required],recaptcha:[\"\"]})}onCaptchaLoad(){console.log(\"captcha is loaded\")}onCaptchaReady(){console.log(\"captcha is ready\")}onCaptchaSuccess(captchaResponse){console.log(captchaResponse)}}return LoginComponent.ɵfac=function(t){return new(t||LoginComponent)(core[\"ɵɵdirectiveInject\"](fesm2015_forms.FormBuilder),core[\"ɵɵdirectiveInject\"](dcc_commons_ng_services.b),core[\"ɵɵdirectiveInject\"](router.a),core[\"ɵɵdirectiveInject\"](router.f),core[\"ɵɵdirectiveInject\"](ngx_captcha.d),core[\"ɵɵdirectiveInject\"](authentication_service.a))},LoginComponent.ɵcmp=core[\"ɵɵdefineComponent\"]({type:LoginComponent,selectors:[[\"ng-component\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core[\"ɵɵviewQuery\"](_c0,!0),2&rf&&core[\"ɵɵqueryRefresh\"](_t=core[\"ɵɵloadQuery\"]())&&(ctx.captchaElem=_t.first)},decls:42,vars:39,consts:[[\"class\",\"btn btn-md border btn-light px-3 mt-4 mb-3\",3,\"click\",4,\"ngIf\"],[1,\"login__box\"],[1,\"login-box__wrapper\",3,\"formGroup\",\"ngSubmit\"],[1,\"alert\",\"alert-danger\",3,\"hidden\"],[1,\"text-dcc-primary\",\"font-weight-bold\",\"mb-2\"],[1,\"text-secondary\",\"mb-4\"],[1,\"form-group\"],[1,\"text-danger\",\"px-1\"],[\"type\",\"text\",\"formControlName\",\"username\",\"required\",\"\",1,\"form-control\"],[\"class\",\"invalid-feedback\",4,\"ngIf\"],[\"type\",\"password\",\"formControlName\",\"password\",\"required\",\"\",1,\"form-control\"],[\"type\",\"Image\",\"formControlName\",\"recaptcha\",\"class\",\"recaptcha\",3,\"siteKey\",\"hl\",\"load\",\"ready\",\"success\",4,\"ngIf\"],[1,\"btn\",\"btn-dcc-primary\",\"btn-block\",3,\"disabled\"],[\"class\",\"spinner-border spinner-border-sm mr-1\",4,\"ngIf\"],[1,\"text-dcc-primary\",\"d-block\",\"mt-3\",3,\"routerLink\"],[\"routerLink\",\"/register\",1,\"text-dcc-primary\",\"d-block\",\"mt-3\"],[1,\"btn\",\"btn-md\",\"border\",\"btn-light\",\"px-3\",\"mt-4\",\"mb-3\",3,\"click\"],[1,\"invalid-feedback\"],[4,\"ngIf\"],[\"type\",\"Image\",\"formControlName\",\"recaptcha\",1,\"recaptcha\",3,\"siteKey\",\"hl\",\"load\",\"ready\",\"success\"],[\"reCaptchaEl\",\"\"],[1,\"spinner-border\",\"spinner-border-sm\",\"mr-1\"]],template:function(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"span\"),core[\"ɵɵtemplate\"](1,LoginComponent_button_1_Template,3,0,\"button\",0),core[\"ɵɵtemplate\"](2,LoginComponent_button_2_Template,3,0,\"button\",0),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](3,\"div\",1),core[\"ɵɵelementStart\"](4,\"form\",2),core[\"ɵɵlistener\"](\"ngSubmit\",(function(){return ctx.onSubmit()})),core[\"ɵɵelementStart\"](5,\"div\",3),core[\"ɵɵtext\"](6),core[\"ɵɵpipe\"](7,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](8,\"h1\",4),core[\"ɵɵtext\"](9),core[\"ɵɵpipe\"](10,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](11,\"h4\",5),core[\"ɵɵtext\"](12),core[\"ɵɵpipe\"](13,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](14,\"div\",6),core[\"ɵɵelementStart\"](15,\"label\"),core[\"ɵɵtext\"](16),core[\"ɵɵpipe\"](17,\"translate\"),core[\"ɵɵelementStart\"](18,\"span\",7),core[\"ɵɵtext\"](19,\"*\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelement\"](20,\"input\",8),core[\"ɵɵtemplate\"](21,LoginComponent_div_21_Template,5,4,\"div\",9),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](22,\"div\",6),core[\"ɵɵelementStart\"](23,\"label\"),core[\"ɵɵtext\"](24),core[\"ɵɵpipe\"](25,\"translate\"),core[\"ɵɵelementStart\"](26,\"span\",7),core[\"ɵɵtext\"](27,\"*\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelement\"](28,\"input\",10),core[\"ɵɵtemplate\"](29,LoginComponent_div_29_Template,3,2,\"div\",9),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](30,LoginComponent_ngx_recaptcha2_30_Template,2,2,\"ngx-recaptcha2\",11),core[\"ɵɵelementStart\"](31,\"div\",6),core[\"ɵɵelementStart\"](32,\"button\",12),core[\"ɵɵtemplate\"](33,LoginComponent_span_33_Template,1,0,\"span\",13),core[\"ɵɵtext\"](34),core[\"ɵɵpipe\"](35,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](36,\"a\",14),core[\"ɵɵtext\"](37),core[\"ɵɵpipe\"](38,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](39,\"a\",15),core[\"ɵɵtext\"](40),core[\"ɵɵpipe\"](41,\"translate\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx.currentLanguage.startsWith(\"en\")),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx.currentLanguage.startsWith(\"ar\")),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"formGroup\",ctx.loginForm),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"hidden\",!ctx.error||ctx.loading),core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](7,22,\"login.invalid_username_or_password\"),\" \"),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](10,24,\"login.header_title\")),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](13,26,\"login.header_text\")),core[\"ɵɵadvance\"](4),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](17,28,\"general.nin_or_iqama\")),core[\"ɵɵadvance\"](4),core[\"ɵɵclassProp\"](\"is-invalid\",ctx.f.username.invalid&&ctx.f.username.touched),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx.f.username.invalid&&ctx.f.username.touched),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](core[\"ɵɵpipeBind1\"](25,30,\"general.password\")),core[\"ɵɵadvance\"](4),core[\"ɵɵclassProp\"](\"is-invalid\",ctx.f.password.invalid&&ctx.f.password.touched),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx.f.password.invalid&&ctx.f.password.touched),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx.showCaptcha),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"disabled\",ctx.loginForm.invalid||ctx.loading),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",ctx.loading),core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](35,32,\"login.btn_login\"),\" \"),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"routerLink\",core[\"ɵɵpureFunction0\"](38,_c1)),core[\"ɵɵadvance\"](1),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](38,34,\"login.btn_forgot_password\"),\" \"),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate1\"](\" \",core[\"ɵɵpipeBind1\"](41,36,\"login.btn_new_registration\"),\" \"))},directives:[common.u,fesm2015_forms[\"ɵangular_packages_forms_forms_y\"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.DefaultValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName,fesm2015_forms.RequiredValidator,router.i,ngx_captcha.c],pipes:[ngx_translate_core.d],styles:[\".recaptcha>div>div{padding-left:calc(50% - 152px);padding-right:calc(50% - 152px);padding-bottom:1.5rem}\"],encapsulation:2}),LoginComponent})()}];let login_routing_module_LoginRoutingModule=(()=>{class LoginRoutingModule{}return LoginRoutingModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:LoginRoutingModule}),LoginRoutingModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||LoginRoutingModule)},imports:[[router.j.forChild(routes)],router.j]}),LoginRoutingModule})();var http=__webpack_require__(\"tk/3\"),shared_module=__webpack_require__(\"i2L+\");let login_module_LoginModule=(()=>{class LoginModule{}return LoginModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:LoginModule}),LoginModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||LoginModule)},imports:[[common.c,fesm2015_forms.ReactiveFormsModule,login_routing_module_LoginRoutingModule,http.c,shared_module.a]]}),LoginModule})()}}]);","extractedComments":[]}