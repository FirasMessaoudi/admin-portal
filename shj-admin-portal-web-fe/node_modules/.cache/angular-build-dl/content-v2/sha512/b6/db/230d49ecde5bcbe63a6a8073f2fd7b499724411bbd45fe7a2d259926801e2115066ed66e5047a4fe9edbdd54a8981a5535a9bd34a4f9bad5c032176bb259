(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{F4UR:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginModule",(function(){return L}));var r=n("ofXK"),a=n("tyNb"),i=n("3Pt+"),o=n("nYR2"),l=n("MqBq"),s=n("AytR"),d=n("ousT"),c=n("fXoL"),p=n("FD72"),m=n("sjCC"),u=n("sYmb");const f=["reCaptchaEl"];function g(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",16),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().setLanguage("ar-SA")})),c["\u0275\u0275elementStart"](1,"span"),c["\u0275\u0275text"](2,"\u0639\u0631\u0628\u064a"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function v(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",16),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().setLanguage("en-US")})),c["\u0275\u0275elementStart"](1,"span"),c["\u0275\u0275text"](2,"En"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function h(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,"general.field_validation_required")))}function x(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,"general.field_validation_pattern")))}function y(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,e.f.username.errors.invalid))}}function b(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,e.f.username.errors["invalid-nin-or-iqama"]))}}function S(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",17),c["\u0275\u0275template"](1,h,3,3,"div",18),c["\u0275\u0275template"](2,x,3,3,"div",18),c["\u0275\u0275template"](3,y,3,3,"div",18),c["\u0275\u0275template"](4,b,3,3,"div",18),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.f.username.errors.required),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.f.username.errors.pattern),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.f.username.errors.invalid),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.f.username.errors["invalid-nin-or-iqama"])}}function I(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,"general.field_validation_required")))}function w(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,e.f.password.errors.invalid))}}function C(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",17),c["\u0275\u0275template"](1,I,3,3,"div",18),c["\u0275\u0275template"](2,w,3,3,"div",18),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.f.password.errors.required),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.f.password.errors.invalid)}}function E(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ngx-recaptcha2",19,20),c["\u0275\u0275listener"]("load",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onCaptchaLoad()}))("ready",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onCaptchaReady()}))("success",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onCaptchaSuccess(t)})),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275propertyInterpolate"]("hl",e.currentLanguage),c["\u0275\u0275property"]("siteKey",e.recaptchaSiteKey)}}function _(e,t){1&e&&c["\u0275\u0275element"](0,"span",21)}const k=function(){return["/reset-password"]},F=[{path:"",component:(()=>{class e{constructor(e,t,n,r,a,i){this.formBuilder=e,this.i18nService=t,this.route=n,this.router=r,this.reCaptchaV3Service=a,this.authenticationService=i,this.loading=!1,this.showCaptcha=!1,this.authenticationService.isAuthenticated()&&this.router.navigate(["/"])}get currentLanguage(){return this.i18nService.language}setLanguage(e){this.i18nService.language=e}ngOnInit(){this.recaptchaSiteKey=s.a.recaptchaSiteKey,this.createForm(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}get f(){return this.loginForm.controls}onSubmit(){Object.keys(this.loginForm.controls).forEach(e=>{this.loginForm.get(e).markAsTouched({onlySelf:!0})}),this.loginForm.invalid||(this.loading=!0,this.authenticationService.login(this.loginForm.value.username,this.loginForm.value.password,null).pipe(Object(o.a)(()=>{this.loginForm.markAsPristine(),this.loading=!1})).subscribe(e=>{console.log(e),this.router.navigate(e.passwordExpired?["/change-password"]:["/"],{replaceUrl:!0})},e=>{console.log(e),this.showCaptcha=555==e.status,this.error=e}))}createForm(){this.loginForm=this.formBuilder.group({username:["",i.Validators.compose([i.Validators.required,d.a.ninOrIqama(d.b.NIN_OR_IQAMA)])],password:["",i.Validators.required],recaptcha:[""]})}onCaptchaLoad(){console.log("captcha is loaded")}onCaptchaReady(){console.log("captcha is ready")}onCaptchaSuccess(e){console.log(e)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.FormBuilder),c["\u0275\u0275directiveInject"](p.b),c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](a.f),c["\u0275\u0275directiveInject"](m.d),c["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](f,!0),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.captchaElem=n.first)},decls:42,vars:39,consts:[["class","btn btn-md border btn-light px-3 mt-4 mb-3",3,"click",4,"ngIf"],[1,"login__box"],[1,"login-box__wrapper",3,"formGroup","ngSubmit"],[1,"alert","alert-danger",3,"hidden"],[1,"text-dcc-primary","font-weight-bold","mb-2"],[1,"text-secondary","mb-4"],[1,"form-group"],[1,"text-danger","px-1"],["type","text","formControlName","username","required","",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password","required","",1,"form-control"],["type","Image","formControlName","recaptcha","class","recaptcha",3,"siteKey","hl","load","ready","success",4,"ngIf"],[1,"btn","btn-dcc-primary","btn-block",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"text-dcc-primary","d-block","mt-3",3,"routerLink"],["routerLink","/register",1,"text-dcc-primary","d-block","mt-3"],[1,"btn","btn-md","border","btn-light","px-3","mt-4","mb-3",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],["type","Image","formControlName","recaptcha",1,"recaptcha",3,"siteKey","hl","load","ready","success"],["reCaptchaEl",""],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275template"](1,g,3,0,"button",0),c["\u0275\u0275template"](2,v,3,0,"button",0),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",1),c["\u0275\u0275elementStart"](4,"form",2),c["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275text"](6),c["\u0275\u0275pipe"](7,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"h1",4),c["\u0275\u0275text"](9),c["\u0275\u0275pipe"](10,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"h4",5),c["\u0275\u0275text"](12),c["\u0275\u0275pipe"](13,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",6),c["\u0275\u0275elementStart"](15,"label"),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"translate"),c["\u0275\u0275elementStart"](18,"span",7),c["\u0275\u0275text"](19,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](20,"input",8),c["\u0275\u0275template"](21,S,5,4,"div",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",6),c["\u0275\u0275elementStart"](23,"label"),c["\u0275\u0275text"](24),c["\u0275\u0275pipe"](25,"translate"),c["\u0275\u0275elementStart"](26,"span",7),c["\u0275\u0275text"](27,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](28,"input",10),c["\u0275\u0275template"](29,C,3,2,"div",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](30,E,2,2,"ngx-recaptcha2",11),c["\u0275\u0275elementStart"](31,"div",6),c["\u0275\u0275elementStart"](32,"button",12),c["\u0275\u0275template"](33,_,1,0,"span",13),c["\u0275\u0275text"](34),c["\u0275\u0275pipe"](35,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"a",14),c["\u0275\u0275text"](37),c["\u0275\u0275pipe"](38,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"a",15),c["\u0275\u0275text"](40),c["\u0275\u0275pipe"](41,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.currentLanguage.startsWith("en")),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.currentLanguage.startsWith("ar")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("formGroup",t.loginForm),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("hidden",!t.error||t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](7,22,"login.invalid_username_or_password")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](10,24,"login.header_title")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](13,26,"login.header_text")),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](17,28,"general.nin_or_iqama")),c["\u0275\u0275advance"](4),c["\u0275\u0275classProp"]("is-invalid",t.f.username.invalid&&t.f.username.touched),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.f.username.invalid&&t.f.username.touched),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](25,30,"general.password")),c["\u0275\u0275advance"](4),c["\u0275\u0275classProp"]("is-invalid",t.f.password.invalid&&t.f.password.touched),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.f.password.invalid&&t.f.password.touched),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showCaptcha),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",t.loginForm.invalid||t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](35,32,"login.btn_login")," "),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction0"](38,k)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](38,34,"login.btn_forgot_password")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](41,36,"login.btn_new_registration")," "))},directives:[r.u,i["\u0275angular_packages_forms_forms_y"],i.NgControlStatusGroup,i.FormGroupDirective,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName,i.RequiredValidator,a.i,m.c],pipes:[u.d],styles:[".recaptcha>div>div{padding-left:calc(50% - 152px);padding-right:calc(50% - 152px);padding-bottom:1.5rem}"],encapsulation:2}),e})()}];let B=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.j.forChild(F)],a.j]}),e})();var q=n("tk/3"),j=n("i2L+");let L=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,i.ReactiveFormsModule,B,q.c,j.a]]}),e})()}}]);