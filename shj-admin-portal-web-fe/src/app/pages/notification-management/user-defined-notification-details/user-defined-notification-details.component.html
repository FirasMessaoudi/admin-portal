<a class="d-block button_back" href="javascript:void(0);" (click)="goBackToList()">
  <svg-icon styleClass="ml-4 mr-2 flip" icon="arrow-right"></svg-icon>
  <span class="mx-2 px-1">{{'general.btn_back' | translate}}</span>
</a>
<div class="content__wrapper">
  <div class="title__Page">
    <h3 *ngIf="editMode" class="sectionTitle">{{"notification-management.edit_notification_details" | translate }}</h3>
    <h3 *ngIf="!editMode" class="sectionTitle">{{"notification-management.display_notification" | translate }}</h3>
  </div>
  <div class="content__section" *ngIf="!canSeeAddUpdateUserDefinedNotification">
    {{'header.welcome' | translate}} <span
    class="font-weight-bold text-dcc-primary">{{'general.app_name' | translate}}</span>
  </div>

  <div class="content__section">

    <form [formGroup]="notificationForm">
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3">
        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.creation_date" | translate }}</label>
          <div *ngIf="editMode" class="input-group">
            <label class="form-control disabled-control">{{creationDate | dateTimeFormat}}</label>
            <div class="input-group-append">
                  <span class="input-group-text">
                    <svg-icon styleClass="fa-w-18 h6" icon="calendar"></svg-icon>
                  </span>
            </div>
          </div>
          <label *ngIf="!editMode"
                 class="form-control-plaintext">{{notificationTemplate?.creationDate | dateTimeFormat}}</label>
        </div>

        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.notification_date" | translate }}</label>
          <label *ngIf="!editMode"
                 class="form-control-plaintext">{{notificationTemplate?.sendingDate | dateTimeFormat}}</label>
          <div *ngIf="editMode" class="input-group">
            <input #dpNotificationDate
                   class="form-control"
                   (click)="d.toggle()"
                   placeholder="DD/MM/YYYY"
                   name="dpNotificationDate"
                   ngbDatepicker #d="ngbDatepicker"
                   [readOnly]="true"
                   [minDate]="today">
            <div class="input-group-append" (click)="d.toggle()">
                  <span class="input-group-text">
                    <svg-icon styleClass="fa-w-18 h6" icon="calendar"></svg-icon>
                  </span>
            </div>
          </div>
        </div>

        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.enabled" | translate }}</label>
          <span *ngIf="!editMode">
             <label *ngIf="notificationTemplate?.enabled"
                    class="form-control-plaintext">{{'general.label_yes' | translate}}</label>
             <label *ngIf="!notificationTemplate?.enabled"
                    class="form-control-plaintext">{{'general.label_no' | translate}}</label>
          </span>
          <div *ngIf="editMode" class="radio-group form-control-plaintext d-flex font-weight-normal">
            <div class="radio-item align-items-baseline d-flex mr-5">
              <input formControlName="enabled" class="mr-2" name="enabled" [value]="true" type="radio"
                     id="customRadioInline01">
              <label for="customRadioInline01">{{'general.label_yes' | translate}}</label>
            </div>
            <div class="radio-item align-items-baseline d-flex">
              <input formControlName="enabled" class="mr-2" name="enabled" [value]="false" type="radio"
                     id="customRadioInline02">
              <label for="customRadioInline02">{{'general.label_no' | translate}}</label>
            </div>
          </div>
        </div>

        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.notification_type" | translate }}</label>
          <span *ngIf="!editMode">
             <label *ngIf="!notificationTemplate?.userSpecific"
                    class="form-control-plaintext">{{ "notification-management.general" | translate }}</label>
             <label *ngIf="notificationTemplate?.userSpecific"
                    class="form-control-plaintext">{{'notification-management.user_specific' | translate}}</label>
          </span>
          <select *ngIf="editMode" formControlName="userSpecific" class="custom-select">
            <option [ngValue]="false">{{ "notification-management.general" | translate }}</option>
            <option [ngValue]="true">{{ "notification-management.user_specific" | translate }}</option>
          </select>
        </div>

        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.notification-category" | translate }}</label>
          <label *ngIf="!editMode" class="form-control-plaintext">
            {{notificationTemplate?.categoryCode ? lookupService().localizedLabel(notificationCategories, notificationTemplate?.categoryCode) : '---'}}</label>
          <select *ngIf="editMode" class="custom-select" formControlName="category">
            <option *ngFor="let notificationCategory of lookupService().localizedItems(notificationCategories)"
                    [ngValue]="notificationCategory.code">
              {{notificationCategory.label}}
            </option>
          </select>
        </div>

        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.notification-severity" | translate }}</label>
          <span *ngIf="!editMode">
             <label *ngIf="notificationTemplate?.important"
                    class="form-control-plaintext">{{ "notification-management.important" | translate }}</label>
             <label *ngIf="!notificationTemplate?.important"
                    class="form-control-plaintext">{{'notification-management.normal' | translate}}</label>
          </span>
          <select *ngIf="editMode" formControlName="severity" class="custom-select">
            <option [ngValue]="true">{{ "notification-management.important" | translate }}</option>
            <option [ngValue]="false">{{ "notification-management.normal" | translate }}</option>
          </select>
        </div>

        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.notification_description" | translate }}</label>
          <input *ngIf="editMode" type="text" formControlName="description" class="form-control"/>
          <label *ngIf="!editMode"
                 class="form-control-plaintext text-break">{{notificationTemplate?.description ? notificationTemplate?.description : '---'}}</label>
        </div>

        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.notification-status" | translate }}</label>
          <label *ngIf="!editMode" class="form-control-plaintext">
            {{notificationTemplate?.statusCode ? lookupService().localizedLabel(notificationStatuses, notificationTemplate?.statusCode) : '---'}}</label>
          <select *ngIf="editMode" class="custom-select" formControlName="status">
            <option *ngFor="let notificationStatus of lookupService().localizedItems(notificationStatuses)"
                    [ngValue]="notificationStatus.code">
              {{notificationStatus.label}}
            </option>
          </select>
        </div>

        <div class="form-group col">
          <label class="col-form-label">{{ "notification-management.force_sending" | translate }}</label>
          <span *ngIf="!editMode">
             <label *ngIf="notificationTemplate?.forceSending"
                    class="form-control-plaintext">{{ "general.dialog_confirmation_ok" | translate }}</label>
             <label *ngIf="!notificationTemplate?.forceSending"
                    class="form-control-plaintext">{{"general.dialog_confirmation_cancel" | translate}}</label>
          </span>
          <select *ngIf="editMode" formControlName="forceSending" class="custom-select">
            <option [ngValue]="true">{{ "general.dialog_confirmation_ok" | translate }}</option>
            <option [ngValue]="false">{{ "general.dialog_confirmation_cancel" | translate }}</option>
          </select>
        </div>

      </div>
      <div>
        <ul ngbNav #nav="ngbNav" class="nav-tabs langTab" [activeId]="activeId">
          <li *ngFor="let language of translatedLanguages; let i = index" [ngbNavItem]="i + 1">
            <a ngbNavLink>{{language.label}}
              <span *ngIf="editMode && (language.code.toLowerCase() === 'ar' || language.code.toLowerCase() === 'en')"
                    class="text-danger">*</span>
              <svg-icon *ngIf="checkContentIsValid(i)" styleClass="fa-w-20 ml-2 check" icon="check-circle"></svg-icon>
            </a>
            <ng-template ngbNavContent>
              <div formArrayName="notificationTemplateContents">
                <div [formGroupName]="i" class="row row-cols-1">
                  <div class="form-group col-sm-12 col-md-6 col-lg-4">
                    <label class="col-form-label">{{ "notification-management.notification-title" | translate }}
                      <span
                        *ngIf="editMode && (language.code.toLowerCase() === 'ar' || language.code.toLowerCase() === 'en')"
                        class="text-danger">*</span>
                    </label>
                    <input *ngIf="editMode" type="text" formControlName="title" class="form-control"/>
                    <label *ngIf="!editMode"
                           class="form-control-plaintext">{{notificationTemplate?.notificationTemplateContents[i]?.title ? notificationTemplate?.notificationTemplateContents[i]?.title : '---'}}</label>
                  </div>

                  <div class="form-group col">
                    <label class="col-form-label">{{ "notification-management.notification-body" | translate }}
                      <span
                        *ngIf="editMode && (language.code.toLowerCase() === 'ar' || language.code.toLowerCase() === 'en')"
                        class="text-danger">*</span>
                    </label>
                    <textarea *ngIf="editMode" type="text" formControlName="body" class="form-control"
                              rows="3"></textarea>
                    <label *ngIf="!editMode"
                           class="form-control-plaintext text-break">{{notificationTemplate?.notificationTemplateContents[i]?.body ? notificationTemplate?.notificationTemplateContents[i]?.body : '---'}}
                    </label>
                  </div>

                </div>
              </div>

              <div class="d-flex justify-content-end">
                <!--            <button class="btn btn-outline-dcc-primary px-4 mr-1" [routerLink]="['/user-defined-notification/list']">
                              {{"general.btn_back" | translate}}
                            </button>-->
                <span *ngIf="editMode">
              <button class="btn btn-outline-dcc-primary ml-auto mr-1 mr-lg-3 mr-md-2 px-4">
              {{"general.btn_save" | translate}}
              </button>
              <button class="btn btn-dcc-primary px-4">
              {{"notification-management.add_notification" | translate}}
              </button>
            </span>
                <span *ngIf="!editMode">
                <button class="btn btn-outline-dcc-primary px-4" (click)="enableEditMode()" [disabled]="true">
                  {{ "general.btn_edit" | translate}}
                </button>
            </span>
              </div>

            </ng-template>
          </li>
        </ul>
      </div>
    </form>

    <div [ngbNavOutlet]="nav" class="mt-2"></div>

  </div>
</div>
