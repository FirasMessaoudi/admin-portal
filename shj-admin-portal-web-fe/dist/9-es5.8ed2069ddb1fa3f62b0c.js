function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{wdPO:function(e,t,n){"use strict";n.r(t),n.d(t,"ChangePasswordModule",(function(){return G}));var r=n("ofXK"),a=n("tyNb"),o=n("3Pt+"),i=n("6LkC"),s=n("jzRc"),d=n("fXoL"),l=n("FD72"),p=n("sYmb");function c(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",13),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().setLanguage("ar-SA")})),d["\u0275\u0275elementStart"](1,"span"),d["\u0275\u0275text"](2,"\u0639\u0631\u0628\u064a"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function m(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",13),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().setLanguage("en-US")})),d["\u0275\u0275elementStart"](1,"span"),d["\u0275\u0275text"](2,"En"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function f(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](2,1,"general.field_validation_required")))}var u=function(){return{minLength:8}};function v(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind2"](2,1,"general.field_validation_min_length",d["\u0275\u0275pureFunction0"](4,u))," "))}var w=function(){return{maxLength:16}};function g(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind2"](2,1,"general.field_validation_max_length",d["\u0275\u0275pureFunction0"](4,w))," "))}function h(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](2,1,n.f.password.errors.invalid))}}function x(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",14),d["\u0275\u0275template"](1,f,3,3,"div",15),d["\u0275\u0275template"](2,v,3,5,"div",15),d["\u0275\u0275template"](3,g,3,5,"div",15),d["\u0275\u0275template"](4,h,3,3,"div",15),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.oldPassword.errors.required),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.oldPassword.errors.minLength),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.oldPassword.errors.maxLength),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.oldPassword.errors.invalid)}}function P(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](2,1,"general.field_validation_required")))}function y(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind2"](2,1,"general.field_validation_min_length",d["\u0275\u0275pureFunction0"](4,u))," "))}function C(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind2"](2,1,"general.field_validation_max_length",d["\u0275\u0275pureFunction0"](4,w))," "))}function S(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](2,1,n.f.newPassword.errors.invalid))}}function I(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",14),d["\u0275\u0275template"](1,P,3,3,"div",15),d["\u0275\u0275template"](2,y,3,5,"div",15),d["\u0275\u0275template"](3,C,3,5,"div",15),d["\u0275\u0275template"](4,S,3,3,"div",15),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.newPassword.errors.required),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.newPassword.errors.minLength),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.newPassword.errors.maxLength),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.newPassword.errors.invalid)}}function _(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](2,1,"general.field_validation_required")))}function b(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind2"](2,1,"general.field_validation_min_length",d["\u0275\u0275pureFunction0"](4,u))," "))}function E(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind2"](2,1,"general.field_validation_max_length",d["\u0275\u0275pureFunction0"](4,w))," "))}function F(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1," Passwords don't match. "),d["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"]("",d["\u0275\u0275pipeBind1"](2,1,n.f.newPasswordConfirm.errors.invalid)," ")}}function B(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",14),d["\u0275\u0275template"](1,_,3,3,"div",15),d["\u0275\u0275template"](2,b,3,5,"div",15),d["\u0275\u0275template"](3,E,3,5,"div",15),d["\u0275\u0275template"](4,F,2,0,"div",15),d["\u0275\u0275template"](5,k,3,3,"div",15),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.newPasswordConfirm.errors.required),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.newPasswordConfirm.errors.minLength),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.newPasswordConfirm.errors.maxLength),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",(null==n.changePasswordForm.errors?null:n.changePasswordForm.errors.mismatch)&&(n.f.newPassword.dirty||n.f.newPasswordConfirm.touched)),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.f.newPasswordConfirm.errors.invalid)}}var L,j,V,q=function(e){return{"is-invalid":e}},N=[{path:"",component:(L=function(){function e(t,n,r,a,o){_classCallCheck(this,e),this.router=t,this.i18nService=n,this.formBuilder=r,this.userService=a,this.authenticationService=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm()}},{key:"currentLanguage",get:function(){return this.i18nService.language}},{key:"setLanguage",value:function(e){this.i18nService.language=e}},{key:"createForm",value:function(){this.changePasswordForm=this.formBuilder.group({oldPassword:["",[o.Validators.required]],newPassword:["",[o.Validators.required,o.Validators.minLength(8),o.Validators.maxLength(16)]],newPasswordConfirm:["",[o.Validators.required,o.Validators.minLength(8),o.Validators.maxLength(16)]]},{validator:this.passwordMatchValidator})}},{key:"f",get:function(){return this.changePasswordForm.controls}},{key:"passwordMatchValidator",value:function(e){return e.controls.newPassword.value===e.controls.newPasswordConfirm.value?null:{mismatch:!0}}},{key:"changePassword",value:function(){var e=this,t=new s.a;t.oldPassword=this.changePasswordForm.controls.oldPassword.value,t.newPassword=this.changePasswordForm.controls.newPassword.value,t.newPasswordConfirm=this.changePasswordForm.controls.newPasswordConfirm.value,this.userService.changePassword(t).subscribe((function(t){t&&t.hasOwnProperty("errors")&&t.errors?Object.keys(e.changePasswordForm.controls).forEach((function(n){if(console.log("looking for validation errors for : "+n),t.errors[n]){var r=e.changePasswordForm.get(n);r.setErrors({invalid:t.errors[n].replace(/\{/,"").replace(/\}/,"")}),r.markAsTouched({onlySelf:!0})}})):e.logout()}))}},{key:"logout",value:function(){this.authenticationService.logout(),this.router.navigate(["/login"])}}]),e}(),L.\u0275fac=function(e){return new(e||L)(d["\u0275\u0275directiveInject"](a.f),d["\u0275\u0275directiveInject"](l.b),d["\u0275\u0275directiveInject"](o.FormBuilder),d["\u0275\u0275directiveInject"](i.f),d["\u0275\u0275directiveInject"](i.b))},L.\u0275cmp=d["\u0275\u0275defineComponent"]({type:L,selectors:[["app-change-password"]],decls:40,vars:34,consts:[["class","btn btn-md border btn-light px-3 mt-4 mb-3",3,"click",4,"ngIf"],[1,"login__box"],[1,"login-box__wrapper",3,"formGroup","ngSubmit"],[1,"text-dcc-primary","font-weight-bold","mb-2"],[1,"text-secondary","mb-4"],[1,"form-group","col"],[1,"text-danger","px-1"],["type","password","formControlName","oldPassword",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","password","formControlName","newPassword",1,"form-control",3,"ngClass"],["type","password","formControlName","newPasswordConfirm",1,"form-control",3,"ngClass"],[1,"form-group"],["type","submit",1,"btn","btn-dcc-primary","px-4",3,"disabled","click"],[1,"btn","btn-md","border","btn-light","px-3","mt-4","mb-3",3,"click"],[1,"text-danger"],[4,"ngIf"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span"),d["\u0275\u0275template"](1,c,3,0,"button",0),d["\u0275\u0275template"](2,m,3,0,"button",0),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"div",1),d["\u0275\u0275elementStart"](4,"form",2),d["\u0275\u0275listener"]("ngSubmit",(function(){return t.changePassword()})),d["\u0275\u0275elementStart"](5,"h1",3),d["\u0275\u0275text"](6),d["\u0275\u0275pipe"](7,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"h4",4),d["\u0275\u0275text"](9),d["\u0275\u0275pipe"](10,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"div",5),d["\u0275\u0275elementStart"](12,"label"),d["\u0275\u0275text"](13),d["\u0275\u0275pipe"](14,"translate"),d["\u0275\u0275elementStart"](15,"span",6),d["\u0275\u0275text"](16,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](17,"input",7),d["\u0275\u0275template"](18,x,5,4,"div",8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](19,"div",5),d["\u0275\u0275elementStart"](20,"label"),d["\u0275\u0275text"](21),d["\u0275\u0275pipe"](22,"translate"),d["\u0275\u0275elementStart"](23,"span",6),d["\u0275\u0275text"](24,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](25,"input",9),d["\u0275\u0275template"](26,I,5,4,"div",8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](27,"div",5),d["\u0275\u0275elementStart"](28,"label"),d["\u0275\u0275text"](29),d["\u0275\u0275pipe"](30,"translate"),d["\u0275\u0275elementStart"](31,"span",6),d["\u0275\u0275text"](32,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](33,"input",10),d["\u0275\u0275template"](34,B,6,5,"div",8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](35,"div",11),d["\u0275\u0275elementStart"](36,"button",12),d["\u0275\u0275listener"]("click",(function(){return t.changePassword()})),d["\u0275\u0275elementStart"](37,"span"),d["\u0275\u0275text"](38),d["\u0275\u0275pipe"](39,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.currentLanguage.startsWith("en")),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.currentLanguage.startsWith("ar")),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("formGroup",t.changePasswordForm),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](7,16,"change-password.title")),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](10,18,"change-password.header_text")),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](14,20,"change-password.old_password")),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngClass",d["\u0275\u0275pureFunction1"](28,q,t.f.oldPassword.errors&&t.f.oldPassword.touched)),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.f.oldPassword.errors&&t.f.oldPassword.touched),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](22,22,"change-password.new_password")),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngClass",d["\u0275\u0275pureFunction1"](30,q,t.f.newPassword.errors&&t.f.newPassword.touched)),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.f.newPassword.errors&&t.f.newPassword.touched),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](30,24,"change-password.new_password_confirm")),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngClass",d["\u0275\u0275pureFunction1"](32,q,t.f.newPasswordConfirm.errors&&t.f.newPasswordConfirm.touched||(null==t.changePasswordForm.errors?null:t.changePasswordForm.errors.mismatch)&&(t.f.newPassword.dirty||t.f.newPasswordConfirm.touched))),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.f.newPasswordConfirm.errors&&t.f.newPasswordConfirm.touched),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("disabled",t.changePasswordForm.invalid),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](39,26,"general.btn_update")))},directives:[r.u,o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.FormGroupDirective,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,r.r],pipes:[p.d],styles:[""]}),L)}],M=((j=function e(){_classCallCheck(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:j}),j.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||j)},imports:[[a.j.forChild(N)],a.j]}),j),O=n("i2L+"),G=((V=function e(){_classCallCheck(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:V}),V.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||V)},providers:[i.f],imports:[[r.c,o.ReactiveFormsModule,M,O.a,p.c]]}),V)}}]);