function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{F4UR:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginModule",(function(){return P}));var r=n("ofXK"),a=n("tyNb"),i=n("3Pt+"),o=n("nYR2"),l=n("MqBq"),c=n("AytR"),d=n("ousT"),s=n("fXoL"),p=n("FD72"),u=n("sjCC"),m=n("sYmb"),f=["reCaptchaEl"];function v(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",16),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().setLanguage("ar-SA")})),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275text"](2,"\u0639\u0631\u0628\u064a"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function g(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",16),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().setLanguage("en-US")})),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275text"](2,"En"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function h(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](2,1,"general.field_validation_required")))}function x(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](2,1,"general.field_validation_pattern")))}function y(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](2,1,n.f.username.errors.invalid))}}function b(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](2,1,n.f.username.errors["invalid-nin-or-iqama"]))}}function S(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",17),s["\u0275\u0275template"](1,h,3,3,"div",18),s["\u0275\u0275template"](2,x,3,3,"div",18),s["\u0275\u0275template"](3,y,3,3,"div",18),s["\u0275\u0275template"](4,b,3,3,"div",18),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.f.username.errors.required),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.f.username.errors.pattern),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.f.username.errors.invalid),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.f.username.errors["invalid-nin-or-iqama"])}}function C(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](2,1,"general.field_validation_required")))}function I(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](2,1,n.f.password.errors.invalid))}}function w(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",17),s["\u0275\u0275template"](1,C,3,3,"div",18),s["\u0275\u0275template"](2,I,3,3,"div",18),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.f.password.errors.required),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.f.password.errors.invalid)}}function _(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ngx-recaptcha2",19,20),s["\u0275\u0275listener"]("load",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onCaptchaLoad()}))("ready",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onCaptchaReady()}))("success",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onCaptchaSuccess(e)})),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275propertyInterpolate"]("hl",r.currentLanguage),s["\u0275\u0275property"]("siteKey",r.recaptchaSiteKey)}}function E(e,t){1&e&&s["\u0275\u0275element"](0,"span",21)}var k,F,B,q=function(){return["/reset-password"]},j=[{path:"",component:(k=function(){function e(t,n,r,a,i,o){_classCallCheck(this,e),this.formBuilder=t,this.i18nService=n,this.route=r,this.router=a,this.reCaptchaV3Service=i,this.authenticationService=o,this.loading=!1,this.showCaptcha=!1,this.authenticationService.isAuthenticated()&&this.router.navigate(["/"])}return _createClass(e,[{key:"currentLanguage",get:function(){return this.i18nService.language}},{key:"setLanguage",value:function(e){this.i18nService.language=e}},{key:"ngOnInit",value:function(){this.recaptchaSiteKey=c.a.recaptchaSiteKey,this.createForm(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}},{key:"f",get:function(){return this.loginForm.controls}},{key:"onSubmit",value:function(){var e=this;Object.keys(this.loginForm.controls).forEach((function(t){e.loginForm.get(t).markAsTouched({onlySelf:!0})})),this.loginForm.invalid||(this.loading=!0,this.authenticationService.login(this.loginForm.value.username,this.loginForm.value.password,null).pipe(Object(o.a)((function(){e.loginForm.markAsPristine(),e.loading=!1}))).subscribe((function(t){console.log(t),e.router.navigate(t.passwordExpired?["/change-password"]:["/"],{replaceUrl:!0})}),(function(t){console.log(t),e.showCaptcha=555==t.status,e.error=t})))}},{key:"createForm",value:function(){this.loginForm=this.formBuilder.group({username:["",i.Validators.compose([i.Validators.required,d.a.ninOrIqama(d.b.NIN_OR_IQAMA)])],password:["",i.Validators.required],recaptcha:[""]})}},{key:"onCaptchaLoad",value:function(){console.log("captcha is loaded")}},{key:"onCaptchaReady",value:function(){console.log("captcha is ready")}},{key:"onCaptchaSuccess",value:function(e){console.log(e)}}]),e}(),k.\u0275fac=function(e){return new(e||k)(s["\u0275\u0275directiveInject"](i.FormBuilder),s["\u0275\u0275directiveInject"](p.b),s["\u0275\u0275directiveInject"](a.a),s["\u0275\u0275directiveInject"](a.f),s["\u0275\u0275directiveInject"](u.d),s["\u0275\u0275directiveInject"](l.a))},k.\u0275cmp=s["\u0275\u0275defineComponent"]({type:k,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275viewQuery"](f,!0),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.captchaElem=n.first)},decls:42,vars:39,consts:[["class","btn btn-md border btn-light px-3 mt-4 mb-3",3,"click",4,"ngIf"],[1,"login__box"],[1,"login-box__wrapper",3,"formGroup","ngSubmit"],[1,"alert","alert-danger",3,"hidden"],[1,"text-dcc-primary","font-weight-bold","mb-2"],[1,"text-secondary","mb-4"],[1,"form-group"],[1,"text-danger","px-1"],["type","text","formControlName","username","required","",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password","required","",1,"form-control"],["type","Image","formControlName","recaptcha","class","recaptcha",3,"siteKey","hl","load","ready","success",4,"ngIf"],[1,"btn","btn-dcc-primary","btn-block",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"text-dcc-primary","d-block","mt-3",3,"routerLink"],["routerLink","/register",1,"text-dcc-primary","d-block","mt-3"],[1,"btn","btn-md","border","btn-light","px-3","mt-4","mb-3",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],["type","Image","formControlName","recaptcha",1,"recaptcha",3,"siteKey","hl","load","ready","success"],["reCaptchaEl",""],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275template"](1,v,3,0,"button",0),s["\u0275\u0275template"](2,g,3,0,"button",0),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"form",2),s["\u0275\u0275listener"]("ngSubmit",(function(){return t.onSubmit()})),s["\u0275\u0275elementStart"](5,"div",3),s["\u0275\u0275text"](6),s["\u0275\u0275pipe"](7,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"h1",4),s["\u0275\u0275text"](9),s["\u0275\u0275pipe"](10,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"h4",5),s["\u0275\u0275text"](12),s["\u0275\u0275pipe"](13,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",6),s["\u0275\u0275elementStart"](15,"label"),s["\u0275\u0275text"](16),s["\u0275\u0275pipe"](17,"translate"),s["\u0275\u0275elementStart"](18,"span",7),s["\u0275\u0275text"](19,"*"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](20,"input",8),s["\u0275\u0275template"](21,S,5,4,"div",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",6),s["\u0275\u0275elementStart"](23,"label"),s["\u0275\u0275text"](24),s["\u0275\u0275pipe"](25,"translate"),s["\u0275\u0275elementStart"](26,"span",7),s["\u0275\u0275text"](27,"*"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](28,"input",10),s["\u0275\u0275template"](29,w,3,2,"div",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](30,_,2,2,"ngx-recaptcha2",11),s["\u0275\u0275elementStart"](31,"div",6),s["\u0275\u0275elementStart"](32,"button",12),s["\u0275\u0275template"](33,E,1,0,"span",13),s["\u0275\u0275text"](34),s["\u0275\u0275pipe"](35,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"a",14),s["\u0275\u0275text"](37),s["\u0275\u0275pipe"](38,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"a",15),s["\u0275\u0275text"](40),s["\u0275\u0275pipe"](41,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.currentLanguage.startsWith("en")),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.currentLanguage.startsWith("ar")),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("formGroup",t.loginForm),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("hidden",!t.error||t.loading),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](7,22,"login.invalid_username_or_password")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](10,24,"login.header_title")),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](13,26,"login.header_text")),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](17,28,"general.nin_or_iqama")),s["\u0275\u0275advance"](4),s["\u0275\u0275classProp"]("is-invalid",t.f.username.invalid&&t.f.username.touched),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.f.username.invalid&&t.f.username.touched),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](25,30,"general.password")),s["\u0275\u0275advance"](4),s["\u0275\u0275classProp"]("is-invalid",t.f.password.invalid&&t.f.password.touched),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.f.password.invalid&&t.f.password.touched),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.showCaptcha),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("disabled",t.loginForm.invalid||t.loading),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.loading),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](35,32,"login.btn_login")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction0"](38,q)),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](38,34,"login.btn_forgot_password")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](41,36,"login.btn_new_registration")," "))},directives:[r.u,i["\u0275angular_packages_forms_forms_y"],i.NgControlStatusGroup,i.FormGroupDirective,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName,i.RequiredValidator,a.i,u.c],pipes:[m.d],styles:[".recaptcha>div>div{padding-left:calc(50% - 152px);padding-right:calc(50% - 152px);padding-bottom:1.5rem}"],encapsulation:2}),k)}],L=((F=function e(){_classCallCheck(this,e)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:F}),F.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||F)},imports:[[a.j.forChild(j)],a.j]}),F),V=n("tk/3"),N=n("i2L+"),P=((B=function e(){_classCallCheck(this,e)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:B}),B.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||B)},imports:[[r.c,i.ReactiveFormsModule,L,V.c,N.a]]}),B)}}]);